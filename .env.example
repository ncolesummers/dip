# =============================================================================
# DIP (Document Intelligence Platform) - Environment Configuration
# =============================================================================
# 
# Copy this file to .env and customize the values for your environment
# 
# IMPORTANT: Never commit sensitive credentials to version control
# Use strong passwords and secure values in production
#
# =============================================================================

# =============================================================================
# GENERAL APPLICATION SETTINGS
# =============================================================================

# Application Environment (development, staging, production)
ENVIRONMENT=development

# Application Version (auto-populated by CI/CD in production)
SERVICE_VERSION=1.0.0-dev

# Global Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================

# PostgreSQL Connection Details
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=dip_user
POSTGRES_PASSWORD=dip_password
POSTGRES_DB=dip_db

# Connection Pool Settings
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=10000
DB_IDLE_TIMEOUT=30000
DB_MAX_LIFETIME=3600000

# Database URL (alternative to individual settings)
# DATABASE_URL=postgresql://dip_user:dip_password@localhost:5432/dip_db

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Connection Details
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Redis Connection Settings
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_MAX_RETRIES=3

# Redis URL (alternative to individual settings)
# REDIS_URL=redis://localhost:6379/0

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================

# Kafka Broker Settings
KAFKA_BROKERS=localhost:9092
KAFKA_CLUSTER_ID=7F983492C65A4A46AF546EQk

# Kafka Port Mappings
KAFKA_EXTERNAL_PORT=9092
KAFKA_EXTERNAL_PORT_2=9094
KAFKA_JMX_PORT=9101

# Kafka Client Configuration
KAFKA_CLIENT_ID=dip-client
KAFKA_ACKS=all
KAFKA_RETRIES=3
KAFKA_BATCH_SIZE=16384
KAFKA_LINGER_MS=5
KAFKA_BUFFER_MEMORY=33554432

# Consumer Configuration
KAFKA_SESSION_TIMEOUT=30000
KAFKA_HEARTBEAT_INTERVAL=3000
KAFKA_MAX_POLL_RECORDS=500
KAFKA_AUTO_OFFSET_RESET=earliest

# =============================================================================
# KAFKA TOPICS CONFIGURATION
# =============================================================================

# Document Processing Topics
KAFKA_TOPIC_DOCUMENTS_INGESTED=documents.ingested
KAFKA_TOPIC_DOCUMENTS_CLASSIFIED=documents.classified
KAFKA_TOPIC_DOCUMENTS_ROUTED=documents.routed
KAFKA_TOPIC_RESPONSES_GENERATED=responses.generated

# Error Handling Topics
KAFKA_TOPIC_DOCUMENTS_FAILED=documents.failed
KAFKA_TOPIC_CLASSIFICATION_FAILED=classification.failed
KAFKA_TOPIC_ROUTING_FAILED=routing.failed
KAFKA_TOPIC_RESPONSE_FAILED=response.failed

# Monitoring Topics
KAFKA_TOPIC_METRICS=system.metrics
KAFKA_TOPIC_HEALTH_CHECKS=system.health
KAFKA_TOPIC_AUDIT_LOGS=system.audit

# =============================================================================
# MICROSERVICES PORT CONFIGURATION
# =============================================================================

# Ingestion Service
INGESTION_PORT=8001
INGESTION_METRICS_PORT=9001

# Classifier Service  
CLASSIFIER_PORT=8002
CLASSIFIER_METRICS_PORT=9002

# Routing Service
ROUTING_PORT=8003
ROUTING_METRICS_PORT=9003

# Response Service
RESPONSE_PORT=8004
RESPONSE_METRICS_PORT=9004

# =============================================================================
# AI/ML CONFIGURATION (Ollama)
# =============================================================================

# Ollama Server Settings
OLLAMA_HOST=localhost
OLLAMA_PORT=11434

# Default AI Models
DEFAULT_MODEL=llama2:7b
CLASSIFICATION_MODEL=llama2:7b
RESPONSE_MODEL=llama2:13b

# AI Processing Settings
MODEL_CACHE_SIZE=5
INFERENCE_TIMEOUT=30000
MAX_TOKENS=2048
TEMPERATURE=0.7
TOP_P=0.9

# Batch Processing Settings
BATCH_SIZE=10
MAX_CONCURRENT_REQUESTS=5

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Prometheus Configuration
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=15d

# Grafana Configuration
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Health Check Settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Metrics Collection
METRICS_ENABLED=true
METRICS_INTERVAL=10s
DETAILED_METRICS=false

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration (if implementing authentication)
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# API Security
API_RATE_LIMIT=100
API_RATE_WINDOW=60s
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# File Upload Security
MAX_FILE_SIZE=50MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,rtf
UPLOAD_DIRECTORY=./uploads
TEMP_DIRECTORY=./temp

# =============================================================================
# EXTERNAL SERVICES & INTEGRATIONS
# =============================================================================

# Email Configuration (for notifications)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@dip.local
SMTP_FROM_NAME=DIP System

# Webhook Configuration
WEBHOOK_TIMEOUT=10000
WEBHOOK_RETRIES=3
WEBHOOK_SECRET=your-webhook-secret-here

# External API Keys (add as needed)
# EXTERNAL_API_KEY=your-api-key-here
# EXTERNAL_API_URL=https://api.example.com

# =============================================================================
# DEVELOPMENT TOOLS CONFIGURATION
# =============================================================================

# Kafka UI
KAFKA_UI_PORT=8080

# PgAdmin
PGADMIN_EMAIL=admin@dip.local
PGADMIN_PASSWORD=admin

# Redis Commander
REDIS_COMMANDER_PORT=8081

# Mailhog (Email testing)
MAILHOG_SMTP_PORT=1025
MAILHOG_WEB_PORT=8025

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Document Processing
MAX_CONCURRENT_DOCUMENTS=20
DOCUMENT_PROCESSING_TIMEOUT=300000
RETRY_BACKOFF_MULTIPLIER=2
MAX_RETRY_DELAY=30000

# Cache Configuration
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
CLASSIFICATION_CACHE_TTL=86400
ROUTING_CACHE_TTL=1800

# Connection Pool Tuning
HTTP_KEEP_ALIVE_TIMEOUT=65000
HTTP_HEADERS_TIMEOUT=60000
HTTP_REQUEST_TIMEOUT=30000

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Experimental Features
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_AI_EXPLANATIONS=false
ENABLE_DOCUMENT_PREVIEW=true
ENABLE_BATCH_PROCESSING=true

# Debug Features (development only)
ENABLE_DEBUG_ENDPOINTS=true
ENABLE_METRICS_EXPORT=true
ENABLE_PERFORMANCE_LOGGING=false

# =============================================================================
# CLOUD & DEPLOYMENT CONFIGURATION
# =============================================================================

# Container Resource Limits (for production)
CONTAINER_MEMORY_LIMIT=512M
CONTAINER_CPU_LIMIT=0.5

# Load Balancer Settings
LOAD_BALANCER_ALGORITHM=round_robin
SESSION_AFFINITY=false

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# =============================================================================
# CUSTOM APPLICATION SETTINGS
# =============================================================================

# Document Classification Settings
CLASSIFICATION_CONFIDENCE_THRESHOLD=0.8
AUTO_CLASSIFICATION_ENABLED=true
MANUAL_REVIEW_THRESHOLD=0.6

# Routing Configuration
ROUTING_STRATEGY=priority_based
DEFAULT_ROUTING_PRIORITY=medium
ENABLE_FALLBACK_ROUTING=true

# Response Generation Settings
RESPONSE_TEMPLATE_PATH=./templates
RESPONSE_MAX_LENGTH=4000
RESPONSE_MIN_LENGTH=100
ENABLE_RESPONSE_CACHING=true

# Notification Settings
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_WEBHOOK_NOTIFICATIONS=false
NOTIFICATION_BATCH_SIZE=50